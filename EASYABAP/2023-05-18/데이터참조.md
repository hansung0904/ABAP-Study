# 데이터 참조
데이터 참조를 한마디로 정의하면 다음과 같다
```
데이터 참조는 데이터 오브젝트에 대한 포인터(Pointer)이다.
```
포인터는 C 프로그래밍의 가장 대표적인 특징 중의 하나로 직접 접근해서 컴퓨터의 메모리를 간결하고 효율성 있게 제어하는 기능을 제공한다.<br>
포인터 데이터형은 다른 변수의 메모리상의 주소 번지를 갖는 데이터형으로서 포인터를 사용하면 사용하고자 하는 대상에 직접 접근할 수 있다.<br>
이러한 포인터를 ABAP 프로그램에 유사하게 적용한 것을 데이터 참조라고 한다. <br><br> 앞에서 필드 심볼도 포인터로 정의했었는데 데이터 참조와의 차이점은 다음과 같다.<br>
필드 심볼은 포인터만 가지고 있으며 Assgin 된 데이터 오브젝트의 메모리에서 작업하는 반면에<br>
데이터 참조는 포인터를 값으로 가지는 참조 변수이며, 자신의 메모리 영역을 가지게 된다.<br><br> 필드 심볼과 데이터 참조는 ABAP 프로그램에서 데이터 오브젝트를 동적으로 생성하고 접근할 수 있게 한다.<br>
다시 말해 데이터 속성과 이름을 프로그램 실행 시점에 정의해서 데이터 오브젝트를 다양하게 활용할 수 있게 한다.<br><br> 예를 들어 사용자가 테이블 이름을 직접 입력해서 원하는 데이터를 조회하고자 하는 상황이 발생하였을때,<br>
이런 경우는 테이블 구조에 따라 화면 리스트에 뿌려주어야 하는데 SAP에 사용되는 3만 개 이상의 테이블을<br>
경우에 따라 선택하는 스크립트를 구현하는 것은 무모한 행동이기 때문이다. <br><br> 아래와 같이 데이터 참조를 활용해서 데이터 오브젝트를 동적으로 생성하면 간단하게 해결할 수 있다.
```ABAP
REPORT Z10_12.

PARAMETERS : p_tname(30) DEFAULT 'SFLIGHT'.

DATA： dref TYPE REF TO data.

FIELD-SYMBOLS: <fsl> TYPE ANY , <fs2> TYPE ANY.

CREATE DATA dref TYPE (p_tname).
ASSIGN dref-〉* TO <fsl>.

SELECT * FROM (p_tname) INTO <fsl> UP TO 3 ROWS.

DO.
    ASSIGN COMPONENT sy-index OF STRUCTURE <fsl> TO <fs2>.
    IF sy-subrc NE 0.
        SKIP.
        EXIT.
    ENDIF.
    WRITE: <fs2>.
ENDDO.
ENDSELECT.
```
예제 코드와 같이 데이터 참조를 사용하지 않고 필드 심볼만으로 테이블 이름을 동적으로 지정하는 것은 불가능하다.<br>
WHY?<br>
필드 심볼은 데이터 오브젝트가 생성된 후에 Assgin이 가능하기 때문<br>
즉 예제를 필드 심볼만으로 구성하려면 DATA SFLIGHT TYPE SFLIGHT 또는 TABLES SFLIGHT. 를 선언해서 <br>
프로그램이 실행과 동시에 데이터 오브젝트가 정적으로 생성되어 있어야 한다.<br>
그러나 데이터 참조를 사용하면 **CREATE DATA** dref TYPE (p_tname). 구문과 같이 데이터 오브젝트 자체를 프로그램 실행 도중에 동적으로 생성하게 된다.<br>
<br> 이 경우를 프로그램 용어로 재해석 한다면..<br><br> 필드 심볼은 데이터 오브젝트에 담겨 있는 메모리 저장소에 작업을 진행하게되며 즉, 필드 심볼은 데이터 오브젝트의 또 다른 상징적인 이름이 된다.<br>
데이터 참조는 자신의 메모리 저장소를 가지는 독립적인 데이터 오브젝트로서 데이터 참조를 변수값으로 저장한다. <br><br> 데이터 참조는 데이터 오브젝트를 가리키는 포인터이며, 필드 심볼을 통해 데이터 오브젝트의 값에 접근하게 된다.<br>
프로그램 실행 시점에 데이터 오브젝트는 동적으로 생성되기 때문에 메모리 주소도 동적으로 할당된다.<br>
***이것이 필드 심볼을 이용해서 데이터 오브젝트에 접근하게 되는 근본적인 이유이다.***






