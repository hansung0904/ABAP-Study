# 스크린 Flow Logic

스크린 Flow Logic은 스크린이 절차적으로 실행되어야 할 부분을 나타낸 것이다. <br>
스크린 Flow Logic은 ABAP Editor와 유사한 Flow Logic 에디터에서 기술할 수 있다.<br>
스크린 FLow Logic에서 사용하는 문법은 ABAP과 유사하지만 다른 언어다..<br>
이것을 스크린 Language라고 부르기도한다.<br>
ABAP과 가장 큰 차이점은 명시적인 데이터 선언 부분이 존재하지 않는다는 것인데, 존재하지 않는 것이 아니라 <br>
스크린 요소를 구성하면서 정의하게 되는 것이다. <br>

하지만 프로세싱 블록(Processing Block)을 가지고 있다는 점에서는 ABAP과 유사하다.<br>
스크린 FLow Logic은 4가지 이벤트 블록을 가지고 있으며 키워드로 이미 정의되어 있다.

| 프로세싱 블록                        | 의미                                                                                                                                                                                              |
|--------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| PROCESS BEFORE OUTPUT (PBO)    | 스크린의 PAI 이벤트가 실행되고 현재 스크린이 조회되기 전에 자동으로 실행된다.<br> PBO 이벤트가 실행되고 나서 스크린이 조회된다.<br> 화면이 처음 실행되면, PBO만 수행된다.<br> 화면에서 사용자가 이벤트를 발생시키면 PAI가 수행되고 PBO가 실행된다. <br> PBO는 일반적으로 화면의 초기값을 지정하는데 자주 사용된다. |
| PROCESS AFTER INPUT (PAI)      | 사용자가 버튼을 클릭하는 것과 같은 액션을 수행하였을 때 발생하는 이벤트 블록이다.<br>PAI 이벤트가 실행된 후 다음 스크린의 PBO 이벤트를 호출한다.                                                                                                         |
| PROCESS ON HELP-REQUEST (POH)  | 사용자가 F1 키를 눌렀을때 발생하는 이벤트 블록                                                                                                                                                                     |
| PROCESS ON VALUE-REQUEST (POV) | 사용자가 F4 키를 눌렀을 때 발생하는 이벤트 블록                                                                                                                                                                    |

각 프로세싱 블록은 모듈 이라는 기능으로 이루어져 있으며, 이러한 측면에서 TYPE-M 프로그램을 Module Pool Program이라고 한다. <br>
스크린 FLow Logic에 사용되는 키워드는 아래 표와 같다.<br>

| Keyword  | Description                                                                                                                                                                                                                                                                                                                                                                                                              |
|----------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| CALL     | Subscreen을 호출한다.                                                                                                                                                                                                                                                                                                                                                                                                         |
| MODULE   | 프로세싱 MODULE을 정의하고, Dialog module을 호출한다.                                                                                                                                                                                                                                                                                                                                                                                  |
| FIELD    | 스크린 필드에서 ABAP 필드로 데이터를 복사하는 구문이다. 스크린의 필드들은 PAI 이벤트를 수행하기 전에는 <br> ABAP 프로그램에서 Control 할 수 가 없다. 이유는 아직 스크린 필드의 데이터가 ABAP 프로그램의 데이터로 복사되지 않았기 때문 <br> FIELD 구문을 선언하게 되면 PAI를 수행하지 않아도 ABAP 프로그램으로 데이터를 체크할 수 있게 된다.<br> 특정 필드의 값이 변경되어 체크 로직을 추가할 때 많이 사용된다. MODULE, SELECT 구문과 함께 사용되는 것이 일반적이다.<br>```FILED WBTABLE-FLID MODULE CHECK_FLID ON REQUEST.```<br> 이 구문은 WBTABLE-FLID 필드 값이 변경되었을 때 CHECK_FLID 모듈을 수행하게 된다. |
| ON       | FIELD 구문과 함께 사용된다.                                                                                                                                                                                                                                                                                                                                                                                                       |
| VALUES   | Field Keyword와 같이 사용된다.                                                                                                                                                                                                                                                                                                                                                                                                  |
| CHAIN    | chain 처리를 시작한다. <br> 여러 개의 필드를 그룹으로 처리한다.                                                                                                                                                                                                                                                                                                                                                                                |
| ENDCHAIN | Processing Chain을 종료한다. <br> 여러 개의 필드를 그룹으로 처리한다.                                                                                                                                                                                                                                                                                                                                                                        |
| LOOP     | LOOP 프로세싱 시작                                                                                                                                                                                                                                                                                                                                                                                                             |
| ENDLOOP  | LOOP 프로세싱 종료                                                                                                                                                                                                                                                                                                                                                                                                             |
| MODIFY   | 스크린 Table을 변경                                                                                                                                                                                                                                                                                                                                                                                                            |
| PROCESS  | PROCESS 이벤트를 정의한다.<br>PROCESS BEFORE OUTPUT…                                                                                                                                                                                                                                                                                                                                                                             |
| SELECT   | 다음 구문과 같이 SELECT 구문을 사용 가능. '*'만 사용할 수 있는 등의 제약사항이 존재<br><br/>```SELECT * FROM table name WHERE table-keyfield = inputfield례 id ....INTO fieldnameWHENEVER NOT FOUND (or FOUND)SEND ERRORMESSAGE (or WARNING)messagenumberWITH fieldname ...```                                                                                                                                                                          |
| VALUES   | Input 값의 정의한다. <br> ```FIELD field_name VALUES (list of values)``` <br> 예) FIELD WBTABLE-FLID VALUES('AA'). <br> 이 구문은 필드에 'AA'이외의 값이 입력되면, 에러가 발생한다. <br> 다음과 같은 옵션들이 있다. <br> ('value') 입력할 수 없는 signle value <br> (BETWEEN 'value' AND 'value') 입력할 수 있는 values 범위 값 <br>(NOT BETWEEN 'value' AND 'value') 입력할 수 없는 values 범위 값                                                                                       |
